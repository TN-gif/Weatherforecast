# 07 资源与素材规范

> 汇总自：`entry/src/main/resources/rawfile/weather/README.md`、`entry/src/main/resources/rawfile/lottie/README.md`，并参考了 `CHANGELOG_VISUAL_RESOURCES.md` 中的相关说明。

本文件对天气视频、WebP 动画和 Lottie 动画的资源规范进行统一说明，便于后续替换素材或新增主题时遵循统一标准。

---

## 一、天气视频资源规范

### 1.1 视频文件要求

- 分辨率：**1080p（1920×1080）**；
- 编码格式：**H.264 MP4**；
- 码率：**≤ 5 Mbps**；
- 时长：**10–15 秒**，需支持无缝循环；
- 单个文件大小：**≤ 5 MB**。

### 1.2 命名与分类

- 建议命名规则：`{weather}_{time}.mp4`，例如：
  - `sunny_day.mp4` / `sunny_night.mp4`
  - `rainy_day.mp4` / `rainy_night.mp4`
  - `snow_day.mp4` / `snow_night.mp4`
- 额外通用夜景视频：
  - `night.mp4` 可作为夜间通用兜底。

### 1.3 使用建议

- 优先选择节奏平缓、颜色层次清晰的素材，便于叠加毛玻璃与文字信息；
- 避免过于复杂或高对比度的视频，以防影响文字可读性；
- 确保所有素材符合**商用授权要求**。

---

## 二、WebP 动画资源规范

### 2.1 动画文件要求

- 显示尺寸：不超过屏幕宽高的 **80%**；
- 帧率：**30 fps** 左右；
- 播放模式：**无限循环**；
- 透明度：保留约 **30% 透明通道**，便于与背景融合。

### 2.2 推荐文件命名

- `sunny.webp` – 晴天动画；
- `rainy.webp` – 雨天动画；
- `snow.webp` – 雪天动画；
- `night.webp` – 夜景动画。

### 2.3 使用场景

- 可作为视频方案的降级或补充，在性能较弱设备上提供轻量动态效果；
- 适合放置在背景层或卡片角落，增强氛围而不过分抢占注意力。

---

## 三、Lottie 动画资源规范

### 3.1 基本要求

- 尺寸：不超过 **100×100 px**；
- 持续时间：不超过 **2 秒**；
- 文件大小：不超过 **50 KB**；
- 格式：标准 Lottie JSON。

### 3.2 命名与内容

- `sun.json` – 太阳旋转动画；
- `rain.json` – 雨滴下落动画；
- `snow.json` – 雪花飘落动画；
- `moon.json` – 月亮闪烁动画。

### 3.3 集成参考

- 未来集成 Lottie 组件时，可参考如下用法：
  ```ts
  LottieAnimator({
    src: 'rawfile/lottie/sun.json',
    speed: 0.8
  })
  .size({ width: 80, height: 80 })
  .margin({ top: 20, right: 30 });
  ```

---

## 四、资源管理与健康检查（概要）

- 资源管理：
  - 利用 `ResourceManager` 统一管理视频、WebP 与 Lottie 资源；
  - 通过配置文件（如 `weather_resources.json`）集中维护资源清单与元数据。
- 健康检查：
  - 使用 `ResourceHealthChecker` 定期检查文件是否存在、大小是否合理；
  - 对缺失资源提供降级策略（改用其他动画或纯渐变背景）。

> 后续若新增天气主题或动画类型，建议首先更新本规范与资源清单，再补充对应的主题常量与调试覆盖层支持。

