import { WeatherSnapshot, WeatherCondition, CurrentWeather, HourlyForecast, DailyForecast, AdviceItem } from '../data/models/WeatherModels';

export class MockWeatherRepository {
  private readonly snapshot: WeatherSnapshot;

  constructor() {
    const condition: WeatherCondition = {
      description: 'æ™´æœ—',
      iconCode: 'sunny',
      themeKey: 'sunny',
      emotion: 'å…‰æŸç©¿è¿‡äº‘å±‚ï¼Œä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡'
    };

    const current: CurrentWeather = {
      temperatureC: 28.4,
      feelsLikeC: 30.1,
      humidity: 55,
      windSpeedKph: 12,
      windDirection: 'ä¸œå—é£',
      pressureHpa: 1010,
      visibilityKm: 12,
      uvIndex: 6,
      aqi: 48,
      sunrise: '05:42',
      sunset: '18:52',
      condition: condition
    };

    const hourly: HourlyForecast[] = [
      { time: '2024-08-30T09:00:00', temperatureC: 26, precipitationProbability: 10, iconCode: 'sunny', description: 'æ—¥å…‰æ…µæ‡’' },
      { time: '2024-08-30T12:00:00', temperatureC: 29, precipitationProbability: 5, iconCode: 'sunny', description: 'æ­£åˆå°æ†©' },
      { time: '2024-08-30T15:00:00', temperatureC: 30, precipitationProbability: 15, iconCode: 'sunny', description: 'å¾®é£æ‹‚é¢' },
      { time: '2024-08-30T18:00:00', temperatureC: 27, precipitationProbability: 20, iconCode: 'sunset', description: 'æ™šéœæµªæ¼«' },
      { time: '2024-08-30T21:00:00', temperatureC: 24, precipitationProbability: 25, iconCode: 'night', description: 'å¤œè‰²æ¸©æŸ”' }
    ];

    const daily: DailyForecast[] = [
      { date: '2024-08-30', minTempC: 24, maxTempC: 31, iconCode: 'sunny', description: 'æ™´æœ—èˆ’é€‚', precipitationProbability: 15 },
      { date: '2024-08-31', minTempC: 25, maxTempC: 32, iconCode: 'cloudy', description: 'å¤šäº‘æœ‰é£', precipitationProbability: 20 },
      { date: '2024-09-01', minTempC: 22, maxTempC: 29, iconCode: 'rainy', description: 'å±€éƒ¨é˜µé›¨', precipitationProbability: 60 },
      { date: '2024-09-02', minTempC: 21, maxTempC: 28, iconCode: 'sunny', description: 'æ¸…çˆ½æ™´å¤©', precipitationProbability: 10 }
    ];

    const advice: AdviceItem[] = [
      { id: 'ad1', icon: 'ğŸ§´', tone: 'æé†’', content: 'ç´«å¤–çº¿æŒ‡æ•°åé«˜ï¼Œå¤–å‡ºè®°å¾—å¸¦ä¼æˆ–å¸½å­ã€‚' },
      { id: 'ad2', icon: 'ğŸ¥¤', tone: 'è´´å¿ƒ', content: 'æ¹¿åº¦é€‚ä¸­ï¼Œéšèº«å°æ°´æ¯å¯ä»¥ä¿æŒå…ƒæ°”ã€‚' },
      { id: 'ad3', icon: 'ğŸ§', tone: 'çµæ„Ÿ', content: 'æŠŠå–œæ¬¢çš„æ­Œå•è°ƒå‡ºæ¥ï¼Œæ€ç»ªéšé£æ‘‡æ›³ã€‚' }
    ];

    this.snapshot = {
      cityId: 'mock_city',
      lastUpdatedIso: new Date().toISOString(),
      timezoneOffsetMinutes: 480,
      current: current,
      hourly: hourly,
      daily: daily,
      advice: advice,
      dataSource: 'mock'
    };
  }

  getSnapshot(cityId: string): WeatherSnapshot {
    const base: WeatherSnapshot = this.snapshot;
    const mockSnapshot: WeatherSnapshot = {
      cityId: cityId,
      lastUpdatedIso: base.lastUpdatedIso,
      timezoneOffsetMinutes: base.timezoneOffsetMinutes,
      current: base.current,
      hourly: base.hourly,
      daily: base.daily,
      advice: base.advice,
      dataSource: base.dataSource
    };
    return mockSnapshot;
  }
}
